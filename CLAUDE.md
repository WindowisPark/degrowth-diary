# í‡´í™”ì¼ê¸° (Degrowth Diary)

ë‚˜ìœ ìŠµê´€ ê¸°ë¡í•˜ë©´ ëª¬ìŠ¤í„°ê°€ ìƒê¸°ëŠ” ì—­ì„¤ì  ìê¸°ê³„ë°œ ì•±

## UI/UX ë””ìì¸ ë ˆí¼ëŸ°ìŠ¤

### ì°¸ê³  ì‚¬ì´íŠ¸

**UI/UX íŒ¨í„´:**
- **WWIT (What Was IT)**: https://wwit.design/ - í•œêµ­ ì•± UI íŒ¨í„´ ëª¨ìŒ
- **UI Pocket**: https://www.ui-pocket.com/mobile/apps - ì¼ë³¸ ì•± UI ê°¤ëŸ¬ë¦¬
- **Mobbin**: https://mobbin.com/ - ê¸€ë¡œë²Œ ì•± UI íŒ¨í„´

**Flutter íŠ¹í™”:**
- **Flutter Awesome**: https://flutterawesome.com/ - Flutter ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸/íŒ¨í‚¤ì§€
- **It's All Widgets**: https://itsallwidgets.com/ - Flutter ì•± ì‡¼ì¼€ì´ìŠ¤
- **Flutter Gems**: https://fluttergems.dev/ - Flutter íŒ¨í‚¤ì§€ ì¹´í…Œê³ ë¦¬ë³„ ì •ë¦¬

**ë””ìì¸ ì˜ê°:**
- **Dribbble Flutter**: https://dribbble.com/tags/flutter - Flutter UI ë””ìì¸
- **Dribbble Monster App**: https://dribbble.com/search/monster-app - ëª¬ìŠ¤í„°/ìºë¦­í„° ì•±

### ë””ìì¸ ë°©í–¥

- **í…Œë§ˆ**: ë‹¤í¬ + ì„¸ê³„ê´€ (ë˜ì „/ëª¬ìŠ¤í„° ì„œì‹ì§€)
- **í•µì‹¬**: ëª¬ìŠ¤í„°ê°€ ì£¼ì¸ê³µ, ê¸°ë¡ì€ ìˆ˜ë‹¨
- **ìŠ¤íƒ€ì¼**: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ + ìˆ˜ì§‘ ìš”ì†Œ

### ì»¬ëŸ¬ ì‹œìŠ¤í…œ

| ìš©ë„ | í˜„ì¬ | ë¹„ê³  |
|------|------|------|
| ë°°ê²½ | ë‹¤í¬ ê·¸ë ˆì´ | ë˜ì „ ëŠë‚Œ í…ìŠ¤ì²˜ ê³ ë ¤ |
| Primary | ë„¤ì˜¨ ê·¸ë¦° | ëª¬ìŠ¤í„° ì†ì„±ë³„ ë³€ì£¼ ê°€ëŠ¥ |
| Accent | - | ì¹´í…Œê³ ë¦¬ë³„ í¬ì¸íŠ¸ ì»¬ëŸ¬ |

### í™ˆ í™”ë©´ ì»¨ì…‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ë‚ ì§œ]              [ì„¤ì •] â”‚  â† ë¯¸ë‹ˆë©€ í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚                 â”‚      â”‚
â”‚    â”‚   ëª¬ìŠ¤í„° ì„œì‹ì§€  â”‚      â”‚  â† ë©”ì¸ ì˜ì—­ (60%)
â”‚    â”‚   (ìºë¦­í„° + ì”¬)  â”‚      â”‚
â”‚    â”‚                 â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì˜¤ëŠ˜ì˜ ê¸°ë¡ (3)    ë”ë³´ê¸° > â”‚  â† ê¸°ë¡ ìš”ì•½
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ” â”‚ â”‚ ğŸ“± â”‚ â”‚ ğŸ›‹ï¸ â”‚         â”‚  â† ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [+ ê¸°ë¡í•˜ê¸°]         â”‚  â† í•˜ë‹¨ CTA
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference

```bash
# ì‹¤í–‰
flutter run

# ë¹Œë“œ
flutter build apk --release
flutter build ios --release

# í…ŒìŠ¤íŠ¸
flutter test

# ì˜ì¡´ì„±
flutter pub get

# ì½”ë“œ ìƒì„± (freezed, json_serializable ë“±)
flutter pub run build_runner build --delete-conflicting-outputs
```

## ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: Flutter 3.x
- **State Management**: Riverpod
- **Backend**: Firebase (Auth, Firestore, FCM, Storage, Functions)
- **Local Storage**: Hive (ì˜¤í”„ë¼ì¸ ìºì‹±)

## ë¬¸ì„œ ìœ„ì¹˜

**ì‘ì—… ì „ ë°˜ë“œì‹œ docs/ í´ë”ì˜ ë¬¸ì„œë¥¼ í™•ì¸í•  ê²ƒ**

- `docs/planning/` - í”„ë¡œì íŠ¸ ê°œìš”, ê¸°ëŠ¥ ì •ì˜, ë¡œë“œë§µ
- `docs/technical/` - ê¸°ìˆ  ìŠ¤íƒ, ì•„í‚¤í…ì²˜, ë°ì´í„° ìŠ¤í‚¤ë§ˆ, í™”ë©´ íë¦„

---

## ì•„í‚¤í…ì²˜ ì›ì¹™

### ë ˆì´ì–´ êµ¬ì¡° (Clean Architecture)

```
Presentation (UI/Widgets)
     â†“ ì˜ì¡´
Providers (Riverpod State)
     â†“ ì˜ì¡´
Domain (Interface/Entity)
     â†“ ì˜ì¡´
Data (Firebase êµ¬í˜„ì²´)
```

**ì˜ì¡´ì„± ê·œì¹™**: ìƒìœ„ ë ˆì´ì–´ëŠ” í•˜ìœ„ ë ˆì´ì–´ì— ì˜ì¡´. ì—­ë°©í–¥ ì˜ì¡´ ê¸ˆì§€.

### í´ë”ë³„ ì—­í• 

| í´ë” | ì—­í•  | Firebase ì˜ì¡´ì„± |
|------|------|-----------------|
| `domain/entities/` | ìˆœìˆ˜ ë°ì´í„° í´ë˜ìŠ¤ | ì—†ìŒ |
| `domain/repositories/` | ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ | ì—†ìŒ |
| `data/models/` | DTO (toJson/fromJson) | Timestamp ë“± |
| `data/firebase/` | Repository êµ¬í˜„ì²´ | ìˆìŒ |
| `data/local/` | Hive ë¡œì»¬ ìºì‹œ | ì—†ìŒ |
| `core/errors/` | Failure í´ë˜ìŠ¤ | ì—†ìŒ |
| `providers/` | DI ì„¤ì • + ìƒíƒœê´€ë¦¬ | refë¡œ ì£¼ì… |
| `presentation/` | UI ìœ„ì ¯ | ì—†ìŒ |

### Repository ì±…ì„ ë¶„ë¦¬

```dart
// ê¸€ë¡œë²Œ ëª¬ìŠ¤í„° ë„ê° (monsters ì»¬ë ‰ì…˜)
IMonsterCatalogRepository  â†’ FirebaseMonsterCatalogRepository

// ìœ ì € ì†Œìœ  ëª¬ìŠ¤í„° (users/{id}/userMonsters)
IUserMonsterRepository     â†’ FirebaseUserMonsterRepository
```

### Entity vs Model ë¶„ë¦¬

```dart
// domain/entities/record.dart - ìˆœìˆ˜ (Firebase ëª¨ë¦„)
class Record {
  final String id;
  final DateTime createdAt;  // ìˆœìˆ˜ DateTime
}

// data/models/record_model.dart - Firebase ë³€í™˜ ë‹´ë‹¹
class RecordModel {
  factory RecordModel.fromJson(Map<String, dynamic> json) {
    return RecordModel(
      createdAt: (json['createdAt'] as Timestamp).toDate(),
    );
  }
  Record toEntity() => Record(...);
}
```

### Riverpod DI íŒ¨í„´

```dart
// ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ìœ¼ë¡œ ì œê³µ - êµ¬í˜„ì²´ êµì²´ ìš©ì´
final recordRepositoryProvider = Provider<IRecordRepository>((ref) {
  return FirebaseRecordRepository(
    FirebaseFirestore.instance,
    ref.watch(authRepositoryProvider),
  );
});
```

---

## Firestore ë°ì´í„° ì„¤ê³„ ì›ì¹™

### 1. ë¹„ì •ê·œí™” (Denormalization)

**RDBì™€ ë‹¤ë¦„**: FirestoreëŠ” JOINì´ ì—†ìŒ. ì½ê¸° ìµœì í™”ë¥¼ ìœ„í•´ ë°ì´í„° ì¤‘ë³µ í—ˆìš©.

```
BAD:  record.userIdë¡œ users ì»¬ë ‰ì…˜ ë³„ë„ ì¡°íšŒ (2íšŒ ì½ê¸°)
GOOD: users/{userId}/records/{recordId} ì„œë¸Œì»¬ë ‰ì…˜ (1íšŒ ì½ê¸°)
```

### 2. ì°¸ì¡° ë°©ì‹ - ë‹¨ë°©í–¥ ìœ ì§€

**Springê³¼ì˜ ì°¨ì´**: JPAì²˜ëŸ¼ ì–‘ë°©í–¥ ê´€ê³„ ì„¤ì • ë¶ˆê°€. ë‹¨ë°©í–¥ ì°¸ì¡°ë§Œ ì‚¬ìš©.

```javascript
// GOOD: monstersì—ì„œ evolution ë‹¨ë°©í–¥ ì°¸ì¡°
monsters/{monsterId} {
  evolutionTo: "monster_002"  // ë‹¨ë°©í–¥ë§Œ
}

// BAD: ì–‘ë°©í–¥ ì°¸ì¡° ì‹œë„ (ë°ì´í„° ë¶ˆì¼ì¹˜ ìœ„í—˜)
monsters/{monsterId} {
  evolutionTo: "monster_002",
  evolutionFrom: "monster_001"  // ë™ê¸°í™” ì–´ë ¤ì›€
}
```

### 3. ìˆœí™˜ ì°¸ì¡° ë°©ì§€

**ë¬¸ì„œ ê°„ ìƒí˜¸ ì°¸ì¡° ê¸ˆì§€**: Aâ†’Bâ†’A í˜•íƒœì˜ ì°¸ì¡° ì²´ì¸ ë§Œë“¤ì§€ ì•ŠìŒ.

```javascript
// BAD: recordê°€ monsterë¥¼, monsterê°€ recordë¥¼ ì°¸ì¡°
records/{id} { monsterId: "m1" }
monsters/m1 { lastRecordId: "r1" }  // ìˆœí™˜!

// GOOD: í•œ ë°©í–¥ë§Œ ì°¸ì¡° + í•„ìš”ì‹œ ì¿¼ë¦¬
records/{id} { monsterId: "m1" }
// monsterì˜ recordsëŠ” ì¿¼ë¦¬ë¡œ ì¡°íšŒ
```

### 4. ì»¬ë ‰ì…˜ êµ¬ì¡°

```
users/{userId}
  â”œâ”€â”€ records/{recordId}        # ì„œë¸Œì»¬ë ‰ì…˜
  â”œâ”€â”€ userMonsters/{monsterId}  # ì„œë¸Œì»¬ë ‰ì…˜
  â””â”€â”€ achievements/{id}         # ì„œë¸Œì»¬ë ‰ì…˜

monsters/{monsterId}            # ê¸€ë¡œë²Œ (ëª¨ë“  ìœ ì € ê³µìœ )
```

### 5. ì§‘ê³„ í•„ë“œ ë³´í˜¸

**í´ë¼ì´ì–¸íŠ¸ write ê¸ˆì§€ í•„ë“œ**: Cloud Functionsì—ì„œë§Œ ì—…ë°ì´íŠ¸

```javascript
users/{userId} {
  streakCount: number,      // í´ë¼ write ê¸ˆì§€
  lastRecordDate: string,   // í´ë¼ write ê¸ˆì§€
  lastRecordAt: timestamp   // í´ë¼ write ê¸ˆì§€
}
```

### 6. ì¿¼ë¦¬ ìµœì í™”

```dart
// BAD: í´ë¼ì—ì„œ ì „ì²´ ì¡°íšŒ í›„ í•„í„°ë§
final all = await records.get();
final filtered = all.where((r) => r.date == today);

// GOOD: Firestore ì¿¼ë¦¬ë¡œ í•„í„°ë§
final today = await records
    .where('recordDate', isEqualTo: '2026-01-09')
    .get();
```

---

## ì½”ë“œ ìŠ¤íƒ€ì¼

### Dart/Flutter

- **Null safety** ì—„ê²© ì ìš©
- **freezed** ì‚¬ìš© ì‹œ immutable íŒ¨í„´
- Provider ì´ë¦„: `xxxProvider` (ì˜ˆ: `recordRepositoryProvider`)
- ë¹„ë™ê¸°: `AsyncValue` í™œìš© (loading/error/data ìƒíƒœ)

### ë„¤ì´ë° ì»¨ë²¤ì…˜

| ì¢…ë¥˜ | í˜•ì‹ | ì˜ˆì‹œ |
|------|------|------|
| íŒŒì¼ | snake_case | `record_model.dart` |
| í´ë˜ìŠ¤ | PascalCase | `RecordModel` |
| ë³€ìˆ˜/í•¨ìˆ˜ | camelCase | `getTodayRecords()` |
| ìƒìˆ˜ | camelCase | `maxSeverity = 5` |
| ì¸í„°í˜ì´ìŠ¤ | I ì ‘ë‘ì‚¬ | `IRecordRepository` |

### ì¹´í…Œê³ ë¦¬ enum key ë°©ì‹

```dart
// í•˜ë“œì½”ë”© ê¸ˆì§€
categoryKey: "food"        // GOOD
categoryKey: "ì‹ìŠµê´€"       // BAD (ë‹¤êµ­ì–´ ëŒ€ì‘ ì–´ë ¤ì›€)
```

---

## ì¤‘ìš” ì œì•½ì‚¬í•­

1. **severity ë²”ìœ„**: 1~5 (Security Rulesì—ì„œ ê²€ì¦)
2. **createdAt**: ì„œë²„ íƒ€ì„ìŠ¤íƒ¬í”„ ê°•ì œ (`request.time`)
3. **recordDate**: "YYYY-MM-DD" ë¬¸ìì—´ (ì§‘ê³„ìš©, ìˆ˜ì • ë¶ˆê°€)
4. **hasMonster í”Œë˜ê·¸**: Firestore null ì¿¼ë¦¬ ì´ìŠˆ ë°©ì§€ìš©

---

## ì£¼ì˜ì‚¬í•­

### Stream vs Future

```dart
// Firebase: ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ì§€ì›
Stream<List<Record>> watchTodayRecords();

// REST API êµì²´ ì‹œ: polling ë˜ëŠ” ë¯¸ì§€ì›
```

### ì˜¤í”„ë¼ì¸ ëŒ€ì‘

| ë°ì´í„° | ìºì‹± | ì „ëµ |
|--------|------|------|
| ëª¬ìŠ¤í„° ë„ê° | ì „ì²´ | ì•± ì‹œì‘ ì‹œ ë™ê¸°í™” |
| ì˜¤ëŠ˜ ê¸°ë¡ | O | Firestore offline + Hive |
| ìœ ì € ëª¬ìŠ¤í„° | O | Firestore offline + Hive |
| ê¸°ë¡ íˆìŠ¤í† ë¦¬ | ìµœê·¼ 7ì¼ | í˜ì´ì§• ì‹œ ì„œë²„ ì¡°íšŒ |

### Error Handling

```dart
// sealed classë¡œ ì—ëŸ¬ íƒ€ì… ì •ì˜
sealed class Failure {
  final String message;
}
class NetworkFailure extends Failure { ... }
class ServerFailure extends Failure { ... }

// AsyncValue.when()ìœ¼ë¡œ UI ì²˜ë¦¬
ref.watch(provider).when(
  data: (data) => ...,
  loading: () => ...,
  error: (e, _) => ErrorView(message: e is Failure ? e.message : 'ì˜¤ë¥˜'),
);
```

### í…ŒìŠ¤íŠ¸

- Repository í…ŒìŠ¤íŠ¸: Fake êµ¬í˜„ì²´ ì£¼ì…
- Provider í…ŒìŠ¤íŠ¸: `ProviderContainer` override
- Widget í…ŒìŠ¤íŠ¸: mock provider ì‚¬ìš©
